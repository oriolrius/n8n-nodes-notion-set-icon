# Test runner container
FROM node:18-alpine

# Install necessary tools
RUN apk add --no-cache \
    curl \
    jq \
    bash \
    wget

# Create test directories
WORKDIR /app

# Copy package.json for test dependencies
COPY test-scripts/package.json .

# Install test dependencies
RUN npm install

# Copy test scripts
COPY test-scripts/ ./test-scripts/

# Make scripts executable
RUN chmod +x test-scripts/*.sh

# Default command
CMD ["npm", "test"]