FROM node:20-alpine

# Install required tools
RUN apk add --no-cache \
    curl \
    jq \
    bash \
    git

# Create working directory
RUN mkdir -p /validator
WORKDIR /validator

# Install validation dependencies
RUN npm init -y && \
    npm install axios chalk@4 dotenv

# Create test results directory
RUN mkdir -p /test-results

# Add node_modules to PATH
ENV NODE_PATH=/validator/node_modules

# The validation script will be mounted as volume
CMD ["node", "/app/validate.js"]